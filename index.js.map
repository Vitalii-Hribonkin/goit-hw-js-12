{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '47432797-7b7ae49ed8d9ca3634e43854b';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport const fetchImages = async (query, page = 1) => {\n  const params = new URLSearchParams({\n    key: API_KEY,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page,\n    per_page: 15,\n  });\n\n  try {\n    const response = await axios.get(`${BASE_URL}?${params}`);\n    return response.data.hits;\n  } catch (error) {\n    throw new Error('Failed to fetch images');\n  }\n};\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nlet lightbox;\n\nexport const createGalleryMarkup = (images) => {\n  return images\n    .map(\n      (img) => `\n    <li class=\"li\">\n      <a href=\"${img.largeImageURL}\">\n        <img src=\"${img.webformatURL}\" alt=\"${img.tags}\" loading=\"lazy\" />\n      </a>\n      <div class=\"div\">\n        <p class=\"p\">Likes: ${img.likes}</p>\n        <p class=\"p\">Views: ${img.views}</p>\n        <p class=\"p\">Comments: ${img.comments}</p>\n        <p class=\"p\">Downloads: ${img.downloads}</p>\n      </div>\n    </li>\n  `\n    )\n    .join('');\n};\n\nexport const renderGallery = (galleryElement, images, append = false) => {\n  const markup = createGalleryMarkup(images);\n  if (append) {\n    galleryElement.insertAdjacentHTML('beforeend', markup);\n  } else {\n    galleryElement.innerHTML = markup;\n  }\n\n  if (!lightbox) {\n    lightbox = new SimpleLightbox('.gallery a');\n  } else {\n    lightbox.refresh();\n  }\n};\n","import 'izitoast/dist/css/iziToast.min.css';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport iziToast from 'izitoast';\nimport { fetchImages } from './js/pixabay-api';\nimport { renderGallery } from './js/render-functions';\n\nconst searchForm = document.getElementById('search-form');\nconst gallery = document.getElementById('gallery');\nconst loader = document.getElementById('loader');\nconst loadMoreButton = document.getElementById('load-more');\n\nlet query = '';\nlet page = 1;\n\nconst showLoader = () => loader.classList.remove('hidden');\nconst hideLoader = () => loader.classList.add('hidden');\nconst showLoadMoreButton = () => loadMoreButton.classList.remove('hidden');\nconst hideLoadMoreButton = () => loadMoreButton.classList.add('hidden');\n\nconst handleSearch = async (event) => {\n  event.preventDefault();\n  query = searchForm.elements['search-input'].value.trim();\n  if (!query) {\n    iziToast.error({ title: 'Error', message: 'Please enter a search query!' });\n    return;\n  }\n\n  page = 1; // Reset page for new search\n  gallery.innerHTML = '';\n  hideLoadMoreButton();\n  showLoader();\n\n  try {\n    const images = await fetchImages(query, page);\n    if (images.length === 0) {\n      iziToast.warning({\n        title: 'No Results',\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n      });\n    } else {\n      renderGallery(gallery, images);\n      if (images.length === 15) showLoadMoreButton(); // Show Load More if more images are available\n    }\n  } catch (error) {\n    iziToast.error({ title: 'Error', message: 'Something went wrong. Please try again later!' });\n  } finally {\n    hideLoader();\n  }\n};\n\nconst handleLoadMore = async () => {\n  page += 1;\n  showLoader();\n  hideLoadMoreButton();\n\n  try {\n    const images = await fetchImages(query, page);\n    renderGallery(gallery, images, true); // Append images\n    if (images.length === 15) showLoadMoreButton();\n    else {\n      iziToast.info({\n        title: 'End of Results',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    }\n\n    // Smooth scroll to new images\n    const { height: cardHeight } = gallery.firstElementChild.getBoundingClientRect();\n    window.scrollBy({ top: cardHeight * 2, behavior: 'smooth' });\n  } catch (error) {\n    iziToast.error({ title: 'Error', message: 'Something went wrong. Please try again later!' });\n  } finally {\n    hideLoader();\n  }\n};\n\nsearchForm.addEventListener('submit', handleSearch);\nloadMoreButton.addEventListener('click', handleLoadMore);\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","params","axios","lightbox","createGalleryMarkup","images","img","renderGallery","galleryElement","append","markup","SimpleLightbox","searchForm","gallery","loader","loadMoreButton","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","handleSearch","event","iziToast","handleLoadMore","cardHeight"],"mappings":"owBAEA,MAAMA,EAAU,qCACVC,EAAW,2BAEJC,EAAc,MAAOC,EAAOC,EAAO,IAAM,CACpD,MAAMC,EAAS,IAAI,gBAAgB,CACjC,IAAKL,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAC,EACA,SAAU,EACd,CAAG,EAED,GAAI,CAEF,OADiB,MAAME,EAAM,IAAI,GAAGL,CAAQ,IAAII,CAAM,EAAE,GACxC,KAAK,IACtB,MAAe,CACd,MAAM,IAAI,MAAM,wBAAwB,CACzC,CACH,ECnBA,IAAIE,EAEG,MAAMC,EAAuBC,GAC3BA,EACJ,IACEC,GAAQ;AAAA;AAAA,iBAEEA,EAAI,aAAa;AAAA,oBACdA,EAAI,YAAY,UAAUA,EAAI,IAAI;AAAA;AAAA;AAAA,8BAGxBA,EAAI,KAAK;AAAA,8BACTA,EAAI,KAAK;AAAA,iCACNA,EAAI,QAAQ;AAAA,kCACXA,EAAI,SAAS;AAAA;AAAA;AAAA,GAI1C,EACA,KAAK,EAAE,EAGCC,EAAgB,CAACC,EAAgBH,EAAQI,EAAS,KAAU,CACvE,MAAMC,EAASN,EAAoBC,CAAM,EACrCI,EACFD,EAAe,mBAAmB,YAAaE,CAAM,EAErDF,EAAe,UAAYE,EAGxBP,EAGHA,EAAS,QAAO,EAFhBA,EAAW,IAAIQ,EAAe,YAAY,CAI9C,EC/BMC,EAAa,SAAS,eAAe,aAAa,EAClDC,EAAU,SAAS,eAAe,SAAS,EAC3CC,EAAS,SAAS,eAAe,QAAQ,EACzCC,EAAiB,SAAS,eAAe,WAAW,EAE1D,IAAIhB,EAAQ,GACRC,EAAO,EAEX,MAAMgB,EAAa,IAAMF,EAAO,UAAU,OAAO,QAAQ,EACnDG,EAAa,IAAMH,EAAO,UAAU,IAAI,QAAQ,EAChDI,EAAqB,IAAMH,EAAe,UAAU,OAAO,QAAQ,EACnEI,EAAqB,IAAMJ,EAAe,UAAU,IAAI,QAAQ,EAEhEK,EAAe,MAAOC,GAAU,CAGpC,GAFAA,EAAM,eAAc,EACpBtB,EAAQa,EAAW,SAAS,cAAc,EAAE,MAAM,OAC9C,CAACb,EAAO,CACVuB,EAAS,MAAM,CAAE,MAAO,QAAS,QAAS,8BAA8B,CAAE,EAC1E,MACD,CAEDtB,EAAO,EACPa,EAAQ,UAAY,GACpBM,IACAH,IAEA,GAAI,CACF,MAAMX,EAAS,MAAMP,EAAYC,EAAOC,CAAI,EACxCK,EAAO,SAAW,EACpBiB,EAAS,QAAQ,CACf,MAAO,aACP,QAAS,0EACjB,CAAO,GAEDf,EAAcM,EAASR,CAAM,EACzBA,EAAO,SAAW,IAAIa,EAAkB,EAE/C,MAAe,CACdI,EAAS,MAAM,CAAE,MAAO,QAAS,QAAS,+CAA+C,CAAE,CAC/F,QAAY,CACRL,GACD,CACH,EAEMM,EAAiB,SAAY,CACjCvB,GAAQ,EACRgB,IACAG,IAEA,GAAI,CACF,MAAMd,EAAS,MAAMP,EAAYC,EAAOC,CAAI,EAC5CO,EAAcM,EAASR,EAAQ,EAAI,EAC/BA,EAAO,SAAW,GAAIa,EAAkB,EAE1CI,EAAS,KAAK,CACZ,MAAO,iBACP,QAAS,4DACjB,CAAO,EAIH,KAAM,CAAE,OAAQE,CAAU,EAAKX,EAAQ,kBAAkB,wBACzD,OAAO,SAAS,CAAE,IAAKW,EAAa,EAAG,SAAU,QAAQ,CAAE,CAC5D,MAAe,CACdF,EAAS,MAAM,CAAE,MAAO,QAAS,QAAS,+CAA+C,CAAE,CAC/F,QAAY,CACRL,GACD,CACH,EAEAL,EAAW,iBAAiB,SAAUQ,CAAY,EAClDL,EAAe,iBAAiB,QAASQ,CAAc"}